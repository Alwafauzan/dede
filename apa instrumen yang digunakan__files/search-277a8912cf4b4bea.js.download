(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(52291)}])},52291:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return el},default:function(){return er}});var s=n(85893),a=n(64487),l=n(67294),r=n(9008),o=n.n(r),i=n(11163),c=n(41664),d=n.n(c),h=n(76812),u=n(66261),m=n(33299),p=n(92981),x=n(12023),g=n(14258),f=n(13662),b=n(29134),w=n(9862),j=n(48794),v=n(38323),N=n(82010),y=n(30399),k=n(11319),S=n(29758),C=n(81829),P=n(635),A=n(20592),T=n(25675),I=n.n(T),E=n(50699),D=n(97910),F=(0,l.memo)(function(e){let{show:t,setShow:n,imageIndex:a,allImages:r,containerWidth:o}=e,handleClose=()=>n(!1),[i,c]=(0,l.useState)(a),d="https://www.google.com/s2/favicons?domain=".concat(new URL(r[i].page_url).hostname),{isXs:h,isMd:u,isSm:m}=(0,D.k)(),p=h?120:200;return(0,s.jsx)(E.Z,{show:t,onHide:handleClose,children:(0,s.jsxs)(E.Z.Body,{className:"px-0",children:[(0,s.jsxs)("button",{style:{display:"flex",alignItems:"left",justifyContent:"left",borderRadius:"50px",color:"white",width:"fit-content"},className:"btn btn-no-border mt-4 lift fs-5 fw-bold pb-3 ps-0",type:"button",onClick:handleClose,children:[(0,s.jsx)("i",{className:"mx-2 fe fe-x"}),"Close"]}),(0,s.jsx)("div",{style:{width:h||u||m?o:1.2*o,height:o/1.5,position:"relative",left:"50%",transform:"translateX(-50%)"},children:(0,s.jsx)(I(),{src:r[i].image_url,layout:"fill",alt:r[i].alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"mt-5",children:r.slice(0,4).map((e,t)=>(0,s.jsx)("div",{style:{width:p,height:p,position:"relative",border:t===i?"2px solid #e6f0fd":"none",borderRadius:"12px"},className:"mx-2 mb-5",onClick:()=>c(t),children:(0,s.jsx)(I(),{src:e.image_url,layout:"fill",alt:e.alt,style:{borderRadius:"10px"},objectFit:"cover",unoptimized:!0})},"image-".concat(e.image_url)))}),(0,s.jsxs)("a",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",backgroundColor:"#575a7b",borderRadius:"50px",color:"white",width:"fit-content",margin:"auto"},className:"lift",href:r[i].page_url,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("img",{src:d,style:{width:"20px",height:"20px"},className:"ms-1 me-2"}),(0,s.jsx)("span",{className:"me-2",children:new URL(r[i].page_url).hostname})]})]})})}),M=(0,l.memo)(function(e){let{url:t,width:n,height:a,onError:r,onHide:o,allImages:i,containerWidth:c,index:d}=e,[h,u]=(0,l.useState)(!1),[m,p]=(0,l.useState)(!0);return(0,s.jsxs)("div",{className:"mx-2 mb-4 mt-2",children:[h&&(0,s.jsx)(F,{show:h,setShow:u,allImages:i,imageIndex:d,containerWidth:c}),m&&(0,s.jsx)("div",{style:{width:n,height:a,position:"relative"},children:(0,s.jsx)(I(),{src:t,layout:"fill",alt:"",style:{borderRadius:"10px"},objectFit:"cover",onError:()=>{r()},className:"image-hover",onClick:()=>{u(!0),j.n.track("Image Clicked",{url:t})},onLoadingComplete:e=>{let{naturalWidth:n,naturalHeight:s}=e;console.log(n,s),(n<100||s<100)&&(p(!1),o(t))},unoptimized:!0})})]})}),_=(0,l.memo)(function(e){let{images:t}=e,n=[...new Set(null==t?void 0:t.filter(e=>(0,f.jv)(e.image_url)).map(e=>e.image_url))],a=(0,l.useRef)(null),[r,o]=(0,l.useState)(75);(0,l.useEffect)(()=>{let updateWidth=()=>{a.current&&o(a.current.offsetWidth)};return window.addEventListener("resize",updateWidth),updateWidth(),()=>window.removeEventListener("resize",updateWidth)},[]);let[i,c]=(0,l.useState)([]),handleImageError=e=>{c(t=>[...t,e])},[d,h]=(0,l.useState)([]),handleHideImage=e=>{h(t=>[...t,e])},u=n&&n.length>0?Math.min(n.length-d.length,C.nb):0,m=Math.min((r-35)/u,500),p=null==t?void 0:t.filter(e=>!d.includes(e.image_url)&&!i.includes(e.image_url));return(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"left"},ref:a,children:null==n?void 0:n.filter(e=>!i.includes(e)&&!d.includes(e)).slice(0,n.length>=C.nb?C.nb-1:C.nb).map((e,t)=>{let n=u===C.nb,a=m;return 1===u?a=r-25:n&&0===t&&(a=2*m),(0,s.jsx)(M,{url:e,width:a,height:m,onError:()=>handleImageError(e),onHide:()=>handleHideImage(e),allImages:p,containerWidth:r,index:t},"answer-image-".concat(e))})})});let L=(0,s.jsxs)("p",{className:"placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),R={strict:!1,output:"mathml"};function FootnoteLink(e){let{href:t="",children:n,...a}=e,{theme:l,setTheme:r,resolvedTheme:o}=(0,N.F)(),i="#333",c="#d6d6d6";if("object"==typeof n&&null!==n&&Array.isArray(n)&&n.length>0){let e=n[0];if(e===f.qz)return(0,s.jsx)("div",{className:"spinner-grow spinner-grow-sm",role:"status"});if(Number.isInteger(Number(e))||Number.isInteger(Number(e.substring(1,e.length-1))))return(0,s.jsx)(A.Z,{message:t,placement:"top",children:(0,s.jsx)("sup",{children:(0,s.jsx)("a",{href:t,target:"_blank",className:"me-1",rel:"noopener noreferrer",style:"dark"===o?{display:"inline-block",borderRadius:"50%",backgroundColor:"#333",color:"#fff",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"}:{display:"inline-block",borderRadius:"50%",backgroundColor:"#d6d6d6",color:"#333",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"},onMouseOver:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onMouseOut:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},onFocus:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onBlur:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},children:Number(e)+1})})})}return(0,s.jsx)("a",{href:t,...a,children:n})}let Z=(0,l.memo)(function(e){let{markdown:t}=e,{theme:n,setTheme:a,resolvedTheme:l}=(0,N.F)(),r={backgroundColor:C.L5,padding:"3px",borderRadius:"8px",color:"white",cursor:"pointer"},o={backgroundColor:"white",padding:"3px",borderRadius:"8px",color:"black",cursor:"pointer"},i=function(e){let t=e.replace(/```latex([\s\S]*?)```/g,(e,t)=>{let n=t;return t.trim().startsWith("$")||(n="$".concat(t)),t.trim().endsWith("$")||(n="".concat(t,"$")),n});return t}(t);return(0,s.jsx)(v.D,{remarkPlugins:[y.Z,S.Z],rehypePlugins:[k.Z,[k.Z,R]],className:"fs-5",components:{p:e=>{let{node:t,...n}=e;return(0,s.jsx)("p",{className:"text-black mb-2 text-break",...n})},ul:e=>{let{node:t,...n}=e,a={...n,ordered:"false"};return(0,s.jsx)("ul",{className:"mb-3",...a})},ol:e=>{let{node:t,...n}=e,a={...n,ordered:"true"};return(0,s.jsx)("ol",{className:"mb-2",...a})},a:FootnoteLink,code(e){let{node:t,inline:n,className:a,children:i,style:c,...d}=e;return n?(0,s.jsx)("code",{onClick:()=>{navigator.clipboard.writeText(String(i))},className:a,style:"dark"===l?o:r,...d,children:i}):(0,s.jsx)(P.Z,{highlighterProps:d,url:"",className:a,children:String(i)})}},children:i})}),errorMessage=e=>(0,s.jsxs)("p",{children:["The inference service may be temporarily unavailable - we have alerts for this and will be fixing it soon.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can try the regenerate button in a few moments.",(0,s.jsx)("br",{})]});FootnoteLink.defaultProps={href:""};var components_AnswerPanel=function(e){let{question:t,waitingForStreamStart:n,answer:a,searchResults:r,doneStreaming:o,metadata:i}=e,c=null==i?void 0:i.model_name,d=null==i?void 0:i.mode,h=(e=>{if(!e)return null;let t=r.map(e=>e.url),formatParagraph=(e,n)=>{let s=e;!o&&n&&(s=s.replace(f.yV,"[".concat(f.qz,"](#loading)"))),s=(s=(0,f.Yg)(s,t)).replace(f.V7,(e,t)=>r?"".concat(t):"");let a=/\$(?=\d+)/g,l=s.split(/(`[^`]*`)/g);l.forEach((e,t)=>{e.startsWith("`")||(l[t]=e.replace(a,"\\$"))}),s=l.join("");let i=s.match(f.x);if(n&&i&&i.length>0){let e=i[i.length-1];"`"===e?s=s.substring(0,s.length-1):e.split("`").length<3&&(s+="`")}return n&&s.endsWith("[")&&(s=s.substring(0,s.length-1)),s},formatCodeBlock=e=>e.replace(f.PT,(e,t)=>e[0]),n=e.split("```");return n.map((e,t)=>{let a=!o&&t===n.length-1;if(t%2!=0){let n=formatCodeBlock(e),l=a&&!n.endsWith("\n");return(0,s.jsx)(Z,{markdown:"```".concat(n).concat(l?"\n":"","```")},t)}let l=e.trimStart().split("\n\n");return l.map((e,t)=>(0,s.jsx)(Z,{markdown:formatParagraph(e,a&&t===l.length-1)},t))})})(a),u=o&&!n&&!h;(0,l.useEffect)(()=>{u&&(j.n.track("Inference server unavailable shown"),console.error("Inference server unavailable"))},[u]);let m="Answer";return c&&(m+=" | ".concat(c," Model")),void 0!==d&&"Normal"!==d&&(m+=" | ".concat(d)),(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"text-uppercase mt-1",children:m}),(0,s.jsx)(_,{images:null==i?void 0:i.images}),n&&L,n&&L,n&&L,!n&&(null!=h?h:errorMessage(t))]})},B=n(7907),components_PaginationButtons=function(e){let{pageIndex:t,setPageIndex:n,numPages:a}=e,l=Array.from(Array(a).keys());return(0,s.jsx)("ul",{className:"pagination pagination-sm mb-0",children:l.map((e,a)=>(0,s.jsx)("li",{className:"page-item ".concat(t===a?"active":""),children:(0,s.jsx)("button",{className:"page-link btn-pagination",onClick:()=>n(a),type:"button",children:a+1})},a))})},H=(0,l.memo)(function(e){var t,n;let{searchResults:a,loading:r,openLinksInNewTab:o,customLinks:i}=e,[c,d]=(0,l.useState)(0),{isXs:h,isSm:u,isMd:m}=(0,D.k)(),[p,x]=(0,l.useState)(!1),g=h||u||m?4:5,b=h?1:5,w=Array.from(Array(b).keys()).map(e=>(0,s.jsxs)("div",{className:"mb-6 placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-6"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-11"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-10"})]},"placeholder ".concat(e))),j=[];for(let e=0;e<a.length;e+=g)j.push(a.slice(e,e+g));if(i.length>0){let e=i.map((e,t)=>({title:"Custom Link ".concat(t),url:e,description:"Your custom link."}));j=[e,...j]}return r||0!==j.length?(0,s.jsxs)("div",{className:"position-relative mt-5",children:[(0,s.jsx)("h6",{className:"text-uppercase d-inline p-0",children:"Sources"}),r&&w,(0,s.jsx)("div",{className:"row",children:c<j.length&&(null===(t=j[c])||void 0===t?void 0:t.slice(0,p?void 0:g).map((e,t)=>(0,f.jv)(e.url)?(0,s.jsx)("div",{className:"".concat(h||u||m?"col-6":""),children:(0,s.jsx)(B.Z,{openLinksInNewTab:o,index:t,webResult:e,pageIndex:c})},e.url):null))}),(h||u||m)&&!p&&(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 pt-0 pb-2 btn-no-border lift",onClick:()=>x(!0),children:[(0,s.jsx)("i",{className:"fe fe-plus-circle me-2"}),"Show more sources"]})}),!r&&(!(h||u||m)||(h||u||m)&&p)&&(0,s.jsx)("div",{className:"row mt-2",children:(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(components_PaginationButtons,{pageIndex:c,setPageIndex:d,numPages:null!==(n=null==j?void 0:j.length)&&void 0!==n?n:0})})})]}):null}),G=n(7895),U=n(93680),q=n(52641),components_FeedbackModal=function(e){let{show:t,setShow:n,sendFeedback:a,currentFeedback:l}=e,handleClose=()=>n(!1),r=!1===l?"What was the issue? How can it be improved?":"What do you like about the response?";return(0,s.jsx)(E.Z,{show:t,onHide:handleClose,children:(0,s.jsx)(E.Z.Body,{className:"bg-light rounded-1 container",children:(0,s.jsxs)(q.Z,{onSubmit:e=>{let t={helpful:l};for(let n=0;n<e.target.elements.length;n+=1)"checkbox"===e.target.elements[n].type&&(t[e.target.elements[n].id]=e.target.elements[n].checked),"textarea"===e.target.elements[n].type&&(t.comment=e.target.elements[n].value);a(t,"Feedback Form"),handleClose(),e.preventDefault()},children:[(0,s.jsxs)(q.Z.Group,{className:"m-1 mb-5",controlId:"exampleForm.ControlTextarea1",children:[(0,s.jsx)("h4",{children:r}),(0,s.jsx)(q.Z.Control,{className:"bg-white",as:"textarea",type:"textarea",rows:3})]}),!1===l&&(0,s.jsxs)(q.Z.Group,{className:"m-1 mb-5",controlId:"formBasicCheckbox",children:[(0,s.jsx)(q.Z.Check,{type:"checkbox",label:"Answer isn't true",id:"inaccurate"}),(0,s.jsx)(q.Z.Check,{type:"checkbox",label:"Answer is incomplete",id:"tooShort"}),(0,s.jsx)(q.Z.Check,{type:"checkbox",label:"I waited too long",id:"tooSlow"})]}),(0,s.jsxs)("p",{className:"m-1 p-1",children:["Have more feedback?"," ",(0,s.jsx)("a",{href:C.tP,children:"Join our discord"})]}),(0,s.jsx)(U.Z,{className:"m-1 rounded-1 btn-sm",variant:"secondary",onClick:handleClose,children:"Close"}),(0,s.jsx)(U.Z,{className:"m-1 rounded-1 btn-sm",variant:"primary",type:"submit",children:"Submit"})]})})})},components_RegenerateFeedback=function(e){let{sendFeedback:t}=e,{isXs:n}=(0,D.k)();return(0,s.jsx)("div",{className:"alert bg-light alert-dismissible fade show p-3",role:"alert",children:(0,s.jsxs)("div",{className:n?"container justify-content-center d-flex text-center":"container d-flex",style:n?{flexWrap:"wrap"}:{},children:[(0,s.jsx)("div",{className:"flex-grow-1 align-self-center",children:(0,s.jsx)("strong",{children:"Was this response better or worse?"})}),(0,s.jsxs)("div",{className:n?"row":"",children:[(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("better"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"}),"Better"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("worse"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"}),"Worse"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("same"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-minus-circle m-2"}),"Same"]})]})]})})};function ShareMenu(e){let{question:t,currentAnswer:n,conversationContent:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-share m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Share "}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Link For Sharing"]})}),n&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(n)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy this Answer"]})}),a&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(a)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Conversation"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{let e="https://twitter.com/intent/tweet?text=Phind Search: ".concat(encodeURIComponent(t),"&url=").concat(encodeURIComponent(window.location.href));window.open(e,"_blank")},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-twitter m-1",viewBox:"0 2 16 16",children:(0,s.jsx)("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})}),"Twitter"]})})]})]})}ShareMenu.defaultProps={currentAnswer:"",conversationContent:""};var O=(0,l.memo)(ShareMenu),W=(0,l.memo)(function(e){let{suggestedFollowups:t,customSearchHandler:n}=e,[a,r]=(0,l.useState)(!0),handleClick=async(e,t)=>{e.preventDefault(),n&&n(t),j.n.track("Click Suggested Followup",{prompt:t})},{isXs:o,isSm:i,isMd:c}=(0,D.k)();return(0,s.jsxs)("div",{className:(o||i||c)&&(null==t?void 0:t.length)?"mt-5 mb-6":"my-5",children:[!!(null==t?void 0:t.length)&&(0,s.jsx)("a",{onClick:()=>r(e=>!e),style:{cursor:"pointer"},children:(0,s.jsxs)("h6",{className:"text-uppercase mt-1",children:["Suggestions",(0,s.jsx)("i",{className:"fe fe-chevron-".concat(a?"up":"down")})]})}),!!(null==t?void 0:t.length)&&a&&t.slice(0,o?3:t.length).map(e=>(0,s.jsx)(x.E.a,{onClick:t=>handleClick(t,e),initial:{opacity:0},animate:{opacity:1},children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start ms-0 me-2 rounded-1",children:e})},e))]})}),V=n(50897),Q=(0,l.memo)(function(e){let{regenerateAnswer:t,answerIndex:n,requestsLeftForGPT4:a,requestsLeftForPhind70B:l,requestsLeftForClaude:r,session:o}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 btn-no-border dropdown dropdown-toggle lift","data-bs-toggle":"dropdown","aria-expanded":"false",children:[(0,s.jsx)("i",{className:"fe fe-refresh-cw me-2"}),"Rewrite"]}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Rewrite your answer "}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,"Phind-34B")},children:"Use Phind-34B"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,"Phind-70B")},children:"Use Phind-70B"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,"GPT-4")},children:"Use GPT-4"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,"Claude Opus")},children:"Use Claude Opus"})}),(0,s.jsx)("li",{children:(0,s.jsxs)("p",{className:"mt-5 mb-0 fs-6 text-break",children:[(0,s.jsxs)("span",{className:"text-primary",children:[Math.max(l,0)," ","Phind-70B uses left",o&&" today","."]}),(0,s.jsx)("br",{}),a>0&&r<=0&&(0,s.jsxs)("span",{className:"text-primary",children:[Math.max(a,0)," ","GPT-4 uses left",o&&" today","."]}),a>0&&r>0&&(0,s.jsxs)("span",{className:"text-primary",children:[Math.max(a,0)," ","GPT-4 and Claude Opus uses left",o&&" today","."]}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-always-dark",children:"Phind-34B has unlimited uses."}),!o&&l<=0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{j.n.track("Sign In")})},children:"Sign in for more Phind-70B model uses."})]}),o&&l<=0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(d(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily Phind-70B model uses."})]}),!o&&a<=0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{j.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses."})]}),o&&a<=0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)(d(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily GPT-4 model uses."})]})]})})]})]})}),z=n(12074),K=n(81722),X=n(51479);function MastheadSearchbox(e){let{placeholder:t,initialQuestionFromCache:n,defaultNumRowsToShow:a,customSearchHandler:r,children:o,answerModel:i,setAnswerModel:c,maxTokenLimit:d=C.M9,canUseGPT4:h=!1}=e,[u,p]=(0,l.useState)(!1),[x,g]=(0,l.useState)(n),[f,w]=(0,l.useState)(""),[v,N]=(0,l.useState)(!1),[y,k]=(0,l.useState)(0),[S,P]=(0,l.useState)(!1),{data:T}=(0,m.useSession)(),E=(0,l.useRef)(null);(0,l.useEffect)(()=>{!function(e){if(null==e?void 0:e.current){let t=e.current;t.style.height="auto";let n=Math.min(t.scrollHeight,512);t.style.height="".concat(n,"px")}}(E)},[E,x]);let handleSubmit=async e=>{e.preventDefault();let t=x.trim();if(""!==t){if(F>=C.$x){let e=(0,b.yF)(t,d,i);localStorage.setItem("long-question",e)}r?await r(t,"",u,f):F>=C.$x&&(window.location.href="/search?source=searchbox&long=true")}},F=x.length,M=(0,b.In)("".concat(x),i),{isXs:_}=(0,D.k)(),L=(0,s.jsxs)("form",{className:"mb-3",onSubmit:e=>handleSubmit(e),children:[(0,s.jsxs)("div",{className:"shadow darkmode-light position-relative search-bar-input-group container px-1 m-0",children:[(0,s.jsx)("textarea",{tabIndex:0,ref:E,autoFocus:!0,autoComplete:"off",autoCorrect:_?"on":"off",autoCapitalize:"off",spellCheck:"false",name:"q",className:"form-control bg-white darkmode-light searchbox-textarea search-bar-hide-scrollbar fs-5 px-2 pt-2 pb-0 my-1 mx-0 row",rows:a,placeholder:t,"aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:e=>{(e.metaKey||e.controlKey)&&p(!0),e.shiftKey&&"Enter"===e.key||"Enter"!==e.key||(e.preventDefault(),handleSubmit(e))},onKeyUp:e=>{("Meta"===e.key||"Control"===e.key)&&p(!1)},onChange:e=>{let t=e.target.value;g(t)},value:x}),(0,s.jsx)(V.Z,{show:v,setShow:N}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-8 d-flex justify-content-start",children:o}),(0,s.jsxs)("div",{className:"col-4 d-flex justify-content-end",children:[(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm fs-6 px-2 pb-2 ".concat(M>=d?"text-danger":"darkmode-light"),style:{width:M<256?"7em":"auto",visibility:M>256?"visible":"hidden"},children:[M," tokens ",M>=d&&"(will truncate)"]}),(0,s.jsx)(A.Z,{message:"Upload image",children:h?(0,s.jsx)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault()},children:(0,s.jsxs)(K.b,{handleChange:e=>{var t;c("GPT-4");let n=null==T?void 0:null===(t=T.user)||void 0===t?void 0:t.userId;if(!n){console.error("User token not found");return}let s=new FormData;s.append("file",e);let a=new XMLHttpRequest,l=(0,C.MJ)();a.open("POST","".concat(l,"/upload_file/"),!0),a.setRequestHeader("Authorization",n),a.upload.onprogress=function(e){if(e.lengthComputable){let t=Math.round(e.loaded/e.total*100);k(t),P(!0)}},a.onload=function(){if(200===a.status){let e=JSON.parse(a.responseText);w(e.url),P(!1)}else console.error("Upload failed");k(0)},a.send(s),j.n.track("Image Uploaded")},maxSize:20,types:["JPG","jpg","JPEG","jpeg","PNG","png","GIF","gif","webp","WEBP"],children:[" ",(0,s.jsx)("i",{className:"fe fe-image ".concat(0===x.length?"masthead-textbox":"darkmode-light"),style:{cursor:"pointer"}})," "]})}):(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),N(!0)},children:[" ",(0,s.jsx)("i",{className:"fe fe-image ".concat(0===x.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,s.jsx)(A.Z,{message:u?"Ignoring Search Results [cmd]":"Using Search Results [cmd]",children:(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),p(e=>!e)},children:[" ",(0,s.jsx)("i",{className:"fe fe-".concat(u?"cloud-lightning":"cloud"," ").concat(0===x.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,s.jsxs)("button",{type:"submit",onClick:handleSubmit,className:"btn btn-sm mx-1 rounded-1 fs-5 p-1 lift ".concat(""),children:[" ",(0,s.jsx)("i",{className:"fe fe-arrow-right ".concat(0===x.length?"masthead-textbox":"darkmode-light")})," "]})]})]})]}),S&&(0,s.jsx)("div",{className:"mt-5",children:(0,s.jsx)(X.Z,{now:y,label:"".concat(y,"%")})}),f&&(0,s.jsx)("div",{style:{height:"250px",position:"relative"},children:(0,s.jsx)(I(),{src:f,className:"mt-5",layout:"fill",objectFit:"contain",alt:"The image you uploaded.",unoptimized:!0})})]});return L}MastheadSearchbox.defaultProps={customSearchHandler:null,children:null,maxTokenLimit:C.M9};var J=n(92218),$=(0,l.memo)(function(){let[e,t]=(0,l.useState)(!1);if((0,l.useEffect)(()=>t(!0),[]),!e)return null;let trackClick=e=>{j.n.track("Click Explore Card",{prompt:e})},n=(0,f.TV)(C.X8),a=n.slice(0,4);return(0,s.jsx)("div",{className:"m-0",children:(0,s.jsx)("div",{className:"container col-10",children:(0,s.jsx)("div",{className:"mt-6 p-2 text-center",children:a.map(e=>(0,s.jsx)("a",{href:"/search?q=".concat(encodeURIComponent(e)),onClick:()=>trackClick(e),children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start py-1 px-2 rounded-1",children:e})},e))})})})}),Y=n(51565),ee=n(96748),et=n(43489);function OnLoadTooltip(e){let{children:t,message:n,show:a=!1,placement:r="top"}=e,[o,i]=(0,l.useState)(a),c=(0,l.useRef)(null);return(0,l.useEffect)(()=>{i(a)},[a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:c,children:t}),(0,s.jsx)(ee.Z,{target:c.current,show:o,placement:r,children:e=>(0,s.jsx)(et.Z,{id:"overlay-tooltip",...e,children:n})})]})}function Masthead(e){var t;let{isValidProPlan:n,numRequestsDone:a,planName:r,planNotExpired:o,isLoggedIn:i,customSearchHandler:c,answerModel:h,setAnswerModel:u}=e,{headerHeight:p}=(0,Y.g)(),{data:x}=(0,m.useSession)(),[g]=(0,G.Z)("numNotLoggedInRequestsDone",0),b=x?(0,f.N7)(r,"GPT-4",o)-a:C.DX-g,w=x?(0,f.N7)(r,"Phind-70B",o)-a:C.$F-g,v=x?(0,f.N7)(r,"Claude Opus",o)-a:C.DX-g,[N,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>y(!0),[]);let k=n||o&&"Phind Free"!==r,S=(0,s.jsx)(s.Fragment,{children:"Your AI search engine and pair programmer."}),{isXs:P}=(0,D.k)(),T="Phind-34B"===h||"Phind-70B"===h||"GPT-4"===h&&b<=0,E=n?C.CZ:C.M9,F=n?C.Qg:C.u6,M=null!==(t=x&&b>0)&&void 0!==t&&t,[_,L]=(0,G.Z)("hasShown70BTooltip",!1),[R,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{Z("Phind-70B"!==h&&!_),_||setTimeout(()=>{L(!0)},4e3)},[_]);let B=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Sign in for daily Phind-70B uses + answer history."," ",(0,s.jsx)("a",{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",onClick:()=>{(0,m.signIn)().then(()=>{j.n.track("Sign In")})},children:"Sign in"})]}),H=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Have questions, feature requests, or bugs reports?"," ",(0,s.jsx)("a",{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",href:C.tP,children:"Join our Discord Community"})]}),U=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get answers directly in VS Code."," ",(0,s.jsx)("a",{href:C.Vt,className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",children:"Try the Phind Extension"})]}),q=(0,s.jsxs)("div",{className:"container text-center fs-6 mt-6 text-dark",children:["Get faster answers, longer context, image uploads, and access to GPT-4."," ",(0,s.jsx)(d(),{className:"btn btn-sm btn-light rounded-1 mb-1 ms-1 py-0 px-2 lift",href:"/plans",onClick:()=>{j.n.track("Click Upgrade to Pro",{from:"Masthead"})},children:"Try Phind Pro"})]}),[O,W]=(0,l.useState)([]),[V,Q]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{Q(!0),W(x&&!k?[...(0,f.TV)([q])]:x&&k?[...(0,f.TV)([H,U])]:[...(0,f.TV)([B,q,H,U])])},[x]),N)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"row justify-content-center",children:[(0,s.jsxs)("div",{className:"col-10",children:[!P&&(0,s.jsx)("h1",{className:"display-4 text-center",style:{visibility:"hidden",height:0},children:S}),(0,s.jsx)("h1",{className:"display-4 mb-8 text-center mt-5",children:(0,s.jsx)(d(),{href:"/search?home=true",children:(0,s.jsx)(I(),{className:"img-fluid darkmode-img",width:187.5,height:65,src:"/images/phind_v2.svg",alt:"...",style:{maxWidth:"100%",height:"auto"},priority:!0})})})]}),(0,s.jsx)("div",{className:"col-lg-8 col-md-8 col-10",children:(0,s.jsx)(A.Z,{message:"Try our new Phind-70B model",children:(0,s.jsx)(MastheadSearchbox,{placeholder:P?"Ask anything.":"Ask anything. What are you stuck on?",initialQuestionFromCache:"",defaultNumRowsToShow:2,answerModel:h,setAnswerModel:u,maxTokenLimit:T?F:E,customSearchHandler:c,canUseGPT4:M,children:(0,s.jsx)(OnLoadTooltip,{message:"Try our new Phind-70B model",show:R,placement:"bottom",children:(0,s.jsx)(J.Z,{answerModel:h,setAnswerModel:u,requestsLeftForGPT4:b,requestsLeftForPhind:w,requestsLeftForClaude:v,session:x,isOnMasthead:!0,setHasShown70BTooltip:L})})})})})]}),N&&!i&&!P&&(0,s.jsx)($,{}),N&&V&&O[0],(0,s.jsx)("div",{style:{height:p,transition:"height ".concat(C.Qs," linear")}})]}):null}function TimingDisplay(e){var t;let{timing:n,start:a,scalingFactor:l}=e;return(0,s.jsx)("div",{style:{display:"block",color:"white"},children:(0,s.jsxs)("div",{style:{display:"block",width:((null!==(t=n.end)&&void 0!==t?t:Date.now()/1e3)-n.start)/l,marginLeft:(n.start-a)/l,background:"rgba(0, 255, ".concat(n.children.length>0?255:0,", 0.3)"),outline:n.children.length>0?"1px solid white":"none",whiteSpace:"nowrap"},title:n.indicator,children:[(0,s.jsxs)("div",{style:{outline:n.children.length>0?"1px solid white":"none"},children:[n.indicator,(0,s.jsxs)("i",{style:{color:"rgba(255, 255, 255, 0.7) "},children:[" (",null!==n.end?"".concat(Math.round((n.end-n.start)*1e3).toLocaleString()," ms"):"running...",")"]})]}),n&&n.children&&n.children.length>0&&(0,s.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.2)",display:"block"},children:n.children.sort((e,t)=>e.start-t.start).map(e=>(0,s.jsx)(TimingDisplay,{timing:e,start:n.start,scalingFactor:l},e.id))})]})})}function DebugInfo(e){let{serverIndicatorTiming:t,backendDelay:n,setShowDebugInfo:a}=e,[r,o]=(0,l.useState)(.005);return(0,s.jsxs)("div",{className:"p-4 mx-5 mb-5 border border-secondary rounded",children:[(0,s.jsxs)("div",{className:"d-flex flex flex-row",children:[(0,s.jsx)("span",{children:"Debug info"}),(0,s.jsx)("span",{style:{flex:1}}),(0,s.jsx)("i",{className:"fe fe-x ms-2",style:{cursor:"pointer"},onClick:()=>{a(!1)}})]}),(0,s.jsx)("hr",{}),void 0===t?"No debug info available":(0,s.jsxs)(s.Fragment,{children:["Waiting for backend:"," ",Math.round(n).toLocaleString(),"ms",(0,s.jsx)("div",{style:{overflowX:"scroll",background:"black"},children:(0,s.jsx)(TimingDisplay,{timing:t,start:t.start,scalingFactor:r})}),"Scale",(0,s.jsx)("input",{type:"range",min:1,max:400,step:1,value:1/r,onChange:e=>o(1/parseFloat(e.target.value))})]})]})}OnLoadTooltip.defaultProps={show:!1,placement:"top"},Masthead.defaultProps={isValidProPlan:!1,isLoggedIn:!1,customSearchHandler:void 0};var en=n(66186);let es={question:"",searchResults:[],answer:"",context:"",previousAnswers:[],customLinks:[],metadata:{}},ea="/search?home=true";function Search(e){let{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u,challengeSeeds:m}=e,x=(0,i.useRouter)(),g=(0,l.useRef)(ea),[f,b]=(0,l.useState)((0,p.Mc)());return(0,l.useEffect)(()=>{x.asPath===ea&&g.current!==x.asPath&&b((0,p.Mc)()),g.current=x.asPath},[x.asPath]),(0,s.jsx)(SearchComponent,{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u,challengeSeeds:m},f)}function SearchComponent(e){var t,n,r;let{cachedAnswerHistory:c,numRequestsDone:v,phindPlan:N,paidPlanValid:y,anonUserId:k,cachedSuggestedFollowupQuestions:S,chatHistoryEnabled:P,isLoggedIn:T,backendToken:I,challengeSeeds:E}=e,F=(0,i.useRouter)(),{isSidebarOpen:M}=(0,z.A)(),{headerHeight:_}=(0,Y.g)(),L=(0,C.R6)(!!y,!!T),R=(0,l.useRef)((0,p.Mc)());(0,l.useEffect)(()=>{let handleRouteChange=e=>{(e===ea||e.startsWith("/agent"))&&(R.current=(0,p.Mc)())};return F.events.on("routeChangeStart",handleRouteChange),()=>{F.events.off("routeChangeStart",handleRouteChange)}},[F]);let{query:Z}=F,{q:B,cache:U,fromExtension:q,source:K,c:X,long:J,home:$,ignoreSearchResults:ee}=Z,{data:et}=(0,m.useSession)(),[el,er]=(0,l.useState)(!1);(0,l.useEffect)(()=>{er(!0)},[]);let[eo,ei]=(0,l.useState)(void 0),ec=(0,l.useRef)(new AbortController),{signal:ed}=ec.current,[eh,eu]=(0,l.useState)(null!=c?c:[]),[em,ep]=(0,l.useState)(null!=S?S:[]),ex=eh.length,eg=null==eh?void 0:eh.map(e=>e.question),ef=null==eg?void 0:eg[0],eb=null==eg?void 0:eg.slice(-1)[0],ew=null==eh?void 0:null===(t=eh.slice(-1)[0])||void 0===t?void 0:t.context,[ej,ev]=(0,l.useState)(),[eN,ey]=(0,l.useState)(0),[ek,eS]=(0,G.Z)("phindDebugMode",!1);(0,l.useEffect)(()=>{let handleKeyDown=e=>{"1"===e.key&&e.shiftKey&&e.metaKey&&(eS(e=>!e),e.preventDefault())};return window.addEventListener("keydown",handleKeyDown),()=>{window.removeEventListener("keydown",handleKeyDown)}},[]);let[eC,eP]=(0,G.Z)("numNotLoggedInRequestsDone",0),[eA,eT]=(0,l.useState)(0),[eI,eE]=(0,l.useState)(0),[eD,eF]=(0,l.useState)(0),eM=100,e_=100,eL=100;el&&(et?(eM=(0,f.N7)(N,"GPT-4",y)-(v+eA),e_=(0,f.N7)(N,"Phind-70B",y)-(v+eI),eL=(0,f.N7)(N,"Claude Opus",y)-(v+eD)):null===et&&(eM=C.DX-eC,e_=C.$F-eC,eL=C.DX-eC));let[eR,eZ]=(0,G.Z)("answerModel",C.Wg),eB=("Phind Pro"===N||"Phind Pro Yearly"===N)&&y,eH="Phind-34B"===eR||"Phind-70B"===eR||"GPT-4"===eR&&eM<=0,eG=eB?C.CZ:C.M9,eU=eB?C.Qg:C.u6,eq=eH?eU:eG,eO=J&&window.localStorage,eW=eO&&localStorage.getItem("long-question")||"",eV=eO&&localStorage.getItem("long-context")||"",eQ=null!==(n=null!=B?B:eW)&&void 0!==n?n:"",ez=null!==(r=null!=X?X:eV)&&void 0!==r?r:"",[eK,eX]=(0,l.useState)(Array(ex).fill(!1)),[eJ,e$]=(0,l.useState)(Array(ex).fill(!1)),[eY,e0]=(0,l.useState)(Array(ex).fill(!1)),[e1,e5]=(0,l.useState)(Array(ex).fill(!0)),[e2,e6]=(0,l.useState)(null),[e3,e4]=(0,l.useState)(!1),[e8,e7]=(0,l.useState)(-1),[e9,te]=(0,l.useState)(!1),[tt,tn]=(0,l.useState)(Array(ex).fill(!1)),ts={},ta=new Date,tl=ta.toLocaleDateString(),tr="";tr=window.navigator.language;let{isXs:to}=(0,D.k)(),{isMd:ti}=(0,D.k)(),{isSm:tc}=(0,D.k)(),td={date:tl,language:tr,detailed:!0,anonUserId:k,answerModel:eR,creativeMode:"true"===ee},handleStopGenerating=()=>{ec.current.abort(),ec.current=new AbortController,e$(e=>e.map(()=>!1)),e0(e=>e.map(()=>!1)),e5(e=>e.map(()=>!0)),e5(e=>e.map(()=>!0))};(0,l.useEffect)(()=>{let handleEsc=e=>{"Escape"===e.key&&handleStopGenerating()};return window.addEventListener("keydown",handleEsc),()=>{window.removeEventListener("keydown",handleEsc)}},[]);let removeAnswer=async e=>{var t;(null===(t=window)||void 0===t?void 0:t.confirm("Are you sure you want to remove this answer?"))&&(j.n.track("Click Remove Answer",{answer:eh[e]}),eu(t=>{let n=t.filter((t,n)=>n!==e);if(!P)return n;let s=null!=U?U:void 0;return s&&(0===n.length?(0,w.do)([s]).then(()=>{F.push(ea)}):(0,w.tI)(s,void 0,n)),n}))},trackSearchEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feedback",n={question:eb,context:ew,source:q?"extension":K,answerCount:eh.length,options:td,searchOptions:ts,phindPlan:N};j.n.track(t,{...n,...e})},regenerateAnswer=(e,t,n)=>{tn(t=>(0,f.N6)(t,e,!1)),eu(s=>{if(e>=s.length)return console.error("Answer index out of bounds"),s;let a=s[e],l=t||a.question||"";j.n.track("Regenerate Answer",{question:l,previousAnswerData:a,answerIndex:e});let r={...td,regenerate:!0};n&&(r={...r,answerModel:n});let o=(0,f.N6)(s,e,{...a,question:l});return generateAnswer(e,o,r),(null==a?void 0:a.answer)&&e7(e),o})};(0,l.useEffect)(()=>{eM<=0&&!e9&&"GPT-4"===eR&&el&&te(!0)},[eM,el]),(0,l.useEffect)(()=>{e_<=0&&!e9&&"Phind-70B"===eR&&el&&te(!0)},[e_,el]),(0,l.useEffect)(()=>{eL<=0&&!e9&&"Claude Opus"===eR&&el&&te(!0)},[eL,el]),(0,l.useEffect)(()=>{if(el&&window.localStorage&&F&&F.isReady&&!$&&!U){if(eQ)0===eh.length&&(R.current=(0,p.Mc)(),handleSubmit(0,eQ,ez,!1,0,"true"===ee))}},[B,F,el]);let handleSubmit=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(eY.some(e=>!0===e)||e1.some(e=>!1===e)){console.warn("Did not start new stream as previous stream is still running.");return}if(""===t)return;let r=[],o=t.match(/(?:^|\s)(https?:\/\/\S+)(?:\s|$)/g);o&&o.forEach(e=>{let t=e.trim();!(t.includes("127.0.0")||t.includes("localhost"))&&(r.includes(t)||r.push(t))}),u.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110});let i=t;(0,b.In)(t,eR)>eq&&(i=(0,b.yF)(t,eq,eR));let c={...es,question:i,context:n};eu(t=>(0,f.N6)(t,e,c)),e$(t=>(0,f.N6)(t,e,!l)),e0(t=>(0,f.N6)(t,e,!0)),ep(t=>(0,f.N6)(t,e,[])),(t=>{let n=(0,f.N6)(eh,e,t);eu(n),s&&eu(e=>e.slice(0,a+1));let o={...td,creativeMode:l,customLinks:l?[]:r};generateAnswer(e,n,o)})(c)},copyAnswer=e=>{let{answer:t,searchResults:n}=eh[e];tn(t=>(0,f.N6)(t,e,!0));let s=n.map(e=>{var t;return null!==(t=e.url)&&void 0!==t?t:"No URL provided."}),a=(0,f.AA)(t,s);j.n.track("Click Copy Answer",{formattedAnswer:a}),navigator.clipboard.writeText(a)},generateAnswer=function(e,t){let n,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:td,r=R.current,o=new Map;if(ev(n),ep(t=>(0,f.N6)(t,e,[])),!1===e1[e]){console.warn("Did not start new stream as previous stream is still running.");return}let i=-1,c=-1,d=Date.now();e0(t=>(0,f.N6)(t,e,!0)),e5(t=>(0,f.N6)(t,e,!1)),e6(null);let{question:m,context:p}=t[e],x=e>=1;if(x){let n=t.slice(0,e);s=(0,w.iK)(m,n,p,l,E,I,eo)}else s=(0,w.tA)(m,p,l,E,I,eo);et||"GPT-4"!==eR||eP(e=>e+1),et||"Phind-70B"!==eR||eP(e=>e+1),s.then(async t=>{let s="",l={},p=!0,x=(0,h.j)(t=>{if(r!==R.current){console.warn("Answer UUID changed, ignoring event");return}if("event"===t.type){let{data:x}=t;if(p&&(ey(c=Date.now()-d),0!==e&&u.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110})),p=!1,x.includes("<PHIND_SPAN_BEGIN>")){let e=x.replace("<PHIND_SPAN_BEGIN>","").replace("</PHIND_SPAN_BEGIN>",""),t=JSON.parse(e);if(o.set(t.id,t),t.parent){var h;null===(h=o.get(t.parent))||void 0===h||h.children.push(t),ev({...n})}else n=t,ev({...t})}else if(x.includes("<PHIND_SPAN_END>")){let e=x.replace("<PHIND_SPAN_END>","").replace("</PHIND_SPAN_END>",""),t=JSON.parse(e),s=o.get(t.id);s&&(s.end=t.end),ev({...n})}else if(x.includes("<PHIND_BACKEND_ERROR>"))e0(t=>(0,f.N6)(t,e,!1)),e5(t=>(0,f.N6)(t,e,!0)),a.uT("Backend error: ".concat(x));else if(x.includes("<PHIND_FOLLOWUP>")){let t=x.replace("<PHIND_FOLLOWUP>","").replace("</PHIND_FOLLOWUP>",""),n=JSON.parse(t);ep(t=>{let s=[...t[e],n];return(0,f.N6)(t,e,s)})}else if(x.includes("<PHIND_DONE/>")){if(e5(t=>(0,f.N6)(t,e,!0)),r!==R.current){console.warn("Answer UUID changed, ignoring answer"),console.log(r,R.current),j.n.track("Search Cancelled by Navigating Away",{question:m,awayPath:window.location.pathname});return}if("/search"!==window.location.pathname){j.n.track("Search Cancelled by Navigating Away",{question:m,awayPath:window.location.pathname});return}eu(t=>{let a={...t[e],answer:s,metadata:l},r=(0,f.N6)(t,e,a);return finishGeneratingAnswer(e,r,d,c,i,n,l),r})}else if(x.includes("<PHIND_METADATA>")){let t=x.replace("<PHIND_METADATA>","").replace("</PHIND_METADATA>",""),n=JSON.parse(t),s=n.model_name;et&&"GPT-4"===s?eT(e=>e+1):et&&"Phind-70B"===s?eE(e=>e+1):et&&"Claude Opus"===s&&eF(e=>e+1),l={...l,...n},eu(t=>(0,f.N6)(t,e,{...t[e],metadata:{...t[e].metadata,...n}}))}else if(x.includes("<PHIND_WEBRESULTS>")){let t=JSON.parse(x.replace("<PHIND_WEBRESULTS>","").replace("</PHIND_WEBRESULTS>",""));if(e$(t=>(0,f.N6)(t,e,!1)),!t||t.length<=0)return;eu(n=>(0,f.N6)(n,e,{...n[e],searchResults:t}))}else e0(t=>(0,f.N6)(t,e,!1)),s+=x,eu(t=>(0,f.N6)(t,e,{...t[e],answer:s})),-1===i&&(i=Date.now())}}),g=t.body,b=(0,f.Mz)(g,ed);for await(let e of(0,f.Uj)(b)){let t=new TextDecoder().decode(e);x.feed(t)}}).catch(t=>{console.error(t),a.Tb(t),e0(t=>(0,f.N6)(t,e,!1)),e5(t=>(0,f.N6)(t,e,!0))})},finishGeneratingAnswer=async(e,t,n,s,l,r,o)=>{var i,c;let d=null!=U?U:void 0,{question:h,answer:u,context:m}=t[e];P&&(d?await(0,w.tI)(d,void 0,t):d=await(0,w.Qc)(h,t).then(e=>e.json()).then(e=>e.newKey).catch(e=>{console.error(e),a.Tb(e)}));let p="/search?cache=".concat(d),x="".concat(window.location.origin).concat(p);(null==et?void 0:null===(i=et.user)||void 0===i?void 0:i.userId)&&j.n.identify(null==et?void 0:null===(c=et.user)||void 0===c?void 0:c.userId);let g=(0,b.In)(h,eR),f=(0,b.In)(m,eR),v=(0,b.In)(u,eR),N=!(0,b.AP)(eR),y=Date.now(),k={"Waiting for backend":s},flattenTiming=(e,t)=>{t.end&&(k[e+t.indicator]=(t.end-t.start)*1e3),t.children.forEach(n=>flattenTiming("".concat(e).concat(t.indicator,"/"),n))};flattenTiming("",r),trackSearchEvent({answerIndex:e,answer:u,newCachedUrlLink:x,question:h,context:m,questionLength:h.length,answerLength:u.length,contextLength:m.length,combinedQuestionContextLength:h.length+m.length,questionTokens:g,contextTokens:f,combinedQuestionContextTokens:g+f,answerTokens:v,startWaitingForAnswerTime:n,answerBeginGenerationTime:l,answerFinishTime:y,timeToFirstToken:l-n,timeToAnswer:y-n,timeFirstToLastToken:y-l,tokensPerSecond:v/((y-l)/1e3),mixpanelId:null==o?void 0:o.id,debuggingTime:k,usingDummyTokenizer:N},"search"),P&&d&&F.replace({pathname:"/search",query:{cache:d}},void 0,{scroll:!1,shallow:!0})},[th,tu]=(0,l.useState)(Array(ex).fill(!1));return el?"true"===$?(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsx)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - ".concat(_,"px)"),transition:"height ".concat(C.Qs," linear")},children:(0,s.jsx)(Masthead,{isValidProPlan:eB,numRequestsDone:v,planName:N,planNotExpired:y,isLoggedIn:T,customSearchHandler:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;s&&ei(s),F.replace({pathname:"/search",query:{q:e,...t&&{c:t},ignoreSearchResults:n}},void 0,{scroll:!0,shallow:!0})},answerModel:eR,setAnswerModel:eZ})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:eb})}),(0,s.jsx)(components_FeedbackModal,{show:e3,setShow:e4,sendFeedback:trackSearchEvent,currentFeedback:e2}),(0,s.jsx)(V.Z,{show:e9,setShow:te}),(0,s.jsxs)("div",{className:"container-xl",children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,s.jsxs)("div",{children:[e_<=0&&"Phind-70B"===eR&&(et?(0,s.jsx)(A.Z,{message:"Upgrade to Phind Pro for 500+ daily Phind-70B uses",placement:"bottom",children:(0,s.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily Phind-70B uses"})}):(0,s.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{j.n.track("Sign In")})},children:"Sign in for more Phind-70B model uses"})),eM<=0&&"GPT-4"===eR&&(et?(0,s.jsx)(A.Z,{message:"Upgrade to Phind Pro for 500+ daily GPT-4 uses",placement:"bottom",children:(0,s.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily GPT-4 uses"})}):(0,s.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{j.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses"}))]})})}),eh.map((e,t)=>{let{question:n,searchResults:a,answer:l,customLinks:r,metadata:o,context:i}=e,c="".concat(n,"-").concat(t),d=t===eh.length-1,h=n.length>150?"".concat(n.slice(0,150),"..."):n;return(0,s.jsxs)("div",{style:{minHeight:d?"calc(100vh - ".concat(_,"px)"):0},children:[(0,s.jsx)("div",{className:"pt-6 pb-1",children:(0,s.jsx)("hr",{className:"separator my-0"})}),(0,s.jsxs)(u.W_,{name:"answer-".concat(t),className:"row",children:[(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:e1[t]?(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",style:{visibility:"hidden"},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-stop-circle m-2"}),"Stop Generating [Esc]"]}):(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",onClick:()=>{j.n.track("Stop Generating",{question:n}),handleStopGenerating()},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-stop-circle m-2"}),"Stop Generating [Esc]"]})}),(0,s.jsxs)("div",{className:"col-lg-8 col-xl-8",children:[!th[t]&&(0,s.jsx)(A.Z,{message:"Edit Question",children:(0,s.jsx)("span",{className:n!==h?"fs-5 mb-3 font-monospace":"fw-bold fs-2 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:()=>{e1[t]&&(j.n.track("Click Edit Question",{question:n,answerIndex:t}),tu(e=>(0,f.N6)(e,t,!0)))},children:eK[t]?n:h})}),th[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.Z,{placeholder:"Edit your question.",initialQuestionFromCache:n+(i?"\n".concat(i):""),defaultNumRowsToShow:1,customSearchHandler:(e,n,s)=>{tn(e=>(0,f.N6)(e,t,!1)),handleSubmit(t,e,n,!0,t,s),tu(e=>(0,f.N6)(e,t,!1))},answerModel:eR,maxTokenLimit:eq})}),(0,s.jsx)("button",{className:"btn btn-no-border lift ms-n2 btn-sm",type:"button",onClick:()=>{tu(e=>(0,f.N6)(e,t,!1))},children:"Cancel"})]}),n!==h&&(0,s.jsx)(A.Z,{message:"Show Full Question",children:(0,s.jsx)("i",{className:eK[t]?"fe fe-chevron-up":"fe fe-chevron-down",onClick:()=>{eX(e=>({...e,[t]:!e[t]}))}})})]}),(0,s.jsx)("div",{className:"d-sm-none d-lg-block col-lg-4 col-xl-4 mt-4",children:!to&&0===t&&n.length>1e3&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)("p",{className:"fs-5 mb-0",children:"Tired of pasting in code?"})}),(0,s.jsx)(en.m,{url:C.Vt,message:C.yv},C.Vt)]})}),(to||tc||ti)&&(0,s.jsx)("div",{className:"col-lg-4 col-xl-4",children:(0,s.jsx)("div",{className:"container-xl web-container p-0 ms-0",children:(0,s.jsx)(H,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eJ[t]})})}),ek&&d&&(0,s.jsx)(DebugInfo,{backendDelay:eN,serverIndicatorTiming:ej,setShowDebugInfo:eS}),(0,s.jsxs)("div",{className:"col-lg-8 col-xl-8 mt-5",children:[(0,s.jsx)("div",{children:(0,s.jsx)(components_AnswerPanel,{question:n,answer:l,waitingForStreamStart:eY[t],searchResults:a,doneStreaming:e1[t],metadata:o})}),!eY[t]&&e1[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-n2 mb-4",children:[e8===t&&(0,s.jsx)(components_RegenerateFeedback,{sendFeedback:e=>{let n=eh[t].previousAnswers.slice(-1)[0];trackSearchEvent({regenerate:e,previousAnswer:n,answer:l},"Regenerate Feedback"),e7(-1)}}),(0,s.jsx)(Q,{regenerateAnswer:regenerateAnswer,answerIndex:t,requestsLeftForGPT4:eM,requestsLeftForPhind70B:e_,requestsLeftForClaude:eL,session:et}),(null===e2||!0===e2)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===e2&&(trackSearchEvent({helpful:!0}),e6(!0),e4(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"})}),(null===e2||!1===e2)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===e2&&(trackSearchEvent({helpful:!1}),e6(!1),e4(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"})}),(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>copyAnswer(t),type:"button",children:tt[t]?(0,s.jsx)("i",{className:"fe fe-check text-success mx-2"}):(0,s.jsx)("i",{className:"fe fe-copy mx-2"})}),(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-edit m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" modify "}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{u.OK.scrollTo("answer-".concat(t),{duration:400,delay:0,smooth:"easeInOutQuart",offset:-110}),tu(e=>(0,f.N6)(e,t,!0))},children:[(0,s.jsx)("i",{className:"fe fe-edit m-1"}),"Edit Question"]}),(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>removeAnswer(t),children:[(0,s.jsx)("i",{className:"fe fe-trash m-1"}),"Delete Answer"]})]})]}),(0,s.jsx)(O,{question:ef,currentAnswer:l,conversationContent:eh.map(e=>"## ".concat(e.question,"\n").concat(e.answer)).join("\n\n")})]}),(d||!to)&&(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsx)(W,{suggestedFollowups:em[t],customSearchHandler:e=>{handleSubmit(ex,e,"")}})}),ex<L&&!eY.some(e=>!0===e)&&!e1.some(e=>!1===e)&&t===ex-1&&(0,s.jsx)("div",{className:"fixed-bottom bg-gradient-light",style:{pointerEvents:"none"},children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"".concat(M?"col-lg-2":"col-lg-0"," sidebar mt-0 p-0")}),(0,s.jsx)("div",{className:"".concat(M?"col-lg-10":"col-lg-12"," sidebar"),children:(0,s.jsx)("div",{className:"container-xl",children:(0,s.jsx)("div",{className:"col-xl-12",style:{pointerEvents:"auto"},children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsx)(g.Z,{placeholder:"Ask a followup question",initialQuestionFromCache:"",defaultNumRowsToShow:1,customSearchHandler:(e,t,n)=>handleSubmit(ex,e,t,!1,0,n),answerModel:eR,maxTokenLimit:eq},eh.length)})})})})]})})]}),ex>=L&&!eY.some(e=>!0===e)&&!e1.some(e=>!1===e)&&t===ex-1&&(0,s.jsx)("div",{className:"container d-flex justify-content-center mb-10",children:(0,s.jsxs)("div",{className:"col-6 darkmode-light p-5 m-4 rounded-1",children:[(0,s.jsxs)("h3",{children:["Message Limit Reached (",L,")"]}),(0,s.jsxs)("p",{className:"fs-5",children:["Login for free threads up to"," ",C.MS,".",(0,s.jsx)("br",{}),"Upgrade for threads up to"," ",C.jx,"!"]}),(0,s.jsx)("a",{href:"/api/auth/signin",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("button",{className:"btn btn-primary rounded-1 fs-6 m-2",type:"button",children:"Login"})}),(0,s.jsx)("a",{href:"/plans",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("button",{className:"btn btn-primary rounded-1 fs-6 m-2",type:"button",children:"Upgrade"})})]})})]}),((to||tc||ti)&&d&&!e1[t]||!to&&!tc&&!ti)&&(0,s.jsxs)("div",{className:"col-lg-4 col-xl-4",children:[(0,s.jsx)("div",{className:to||tc||ti?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 ms-0 ".concat(d?"mb-10":""),children:(0,s.jsxs)("div",{style:{visibility:(to||tc||ti)&&d?"hidden":"visible"},children:[!e1[t]&&(0,s.jsx)(x.E.div,{layout:!0,initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,s.jsx)(H,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eJ[t]})}),e1[t]&&(0,s.jsx)(H,{customLinks:r,openLinksInNewTab:!0,searchResults:a,loading:eJ[t]})]})}),(0,s.jsx)("div",{className:"container-xl mt-4 align-items-end"})]})]})]},c)})]})]}):null}Search.defaultProps={phindPlan:"Phind Free",paidPlanValid:!1,anonUserId:"",cachedAnswerHistory:[],cachedSuggestedFollowupQuestions:[]};var el=!0,er=Search}},function(e){e.O(0,[74,507,200,584,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);